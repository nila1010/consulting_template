---
import type { ImageMetadata } from "astro";
import { Image } from "astro:assets";
import { Icon } from "astro-icon/components";

const { imagePath, altText, profileContent } = Astro.props;
const images = import.meta.glob<{ default: ImageMetadata }>("/src/assets/*.{jpeg,jpg,png,gif}");
if (!images[imagePath]) throw new Error(`"${imagePath}" does not exist in glob: "src/assets/*.{jpeg,jpg,png,gif}"`);
---

<section class="full-width-grid">
  {
    profileContent.map((card) => (
      <article>
        <div>
          <p>{card.work}</p>
          <Image src={images[card.imagePath]()} alt={card.altText} />
        </div>
        <h3>{card.name}</h3>
        <p>{card.text}</p>
        <div>
          <Icon name="instagram" />
          <Icon name="facebook" />
          <Icon name="twitter" />
        </div>
      </article>
    ))
  }
</section>
<style>
  section {
    margin-block-start: 3rem;
    display: flex;
    gap: 2rem;
    padding-inline: max(2rem, 50% - var(--content) / 2);
    overflow: auto;
    > * {
      flex: 1 0 16rem;
    }
  }
  article {
    > * + * {
      margin-block-start: 1.6cqi;
    }

    h3 + p {
      margin-block-start: 0.8cqi;
    }

    > div {
      p {
        --bg-color: black;
        --text-color: white;
        inline-size: fit-content;
        background: var(--bg-color);
        color: var(--text-color);
        padding: 0.25rem 1.3125rem;
        border-radius: 1.8125rem;
        line-height: var(--lineheight-step-3);
        z-index: 1;
        place-self: end;
        margin-inline-end: 2cqi;
        margin-block-end: 1.5cqi;
      }
      &:first-child {
        img {
          border-radius: 1.25rem;
        }
        display: grid;
        & > * {
          grid-area: 1/1;
        }
      }

      &:last-child {
        display: flex;
        gap: 1.8125rem;
        place-content: center;
      }
    }
  }
  [data-icon] {
    inline-size: 1.44731rem;
    block-size: 1.15706rem;
  }
</style>
